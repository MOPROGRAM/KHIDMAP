rules_version = '2';

// Docs: https://firebase.google.com/docs/storage/security
service firebase.storage {
  // The {bucket} wildcard indicates we match all Cloud Storage buckets
  match /b/{bucket}/o {
    
    // Match any file path in a user's portfolio folder
    match /serviceAds/{userId}/{allPaths=**} {
    
      // Allow anyone to read files (e.g., for public profile pages)
      allow read;
      
      // Allow write operations (create, update, delete) only if the
      // requesting user is authenticated and their UID matches the {userId}
      // in the path. This ensures users can only modify their own files.
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
